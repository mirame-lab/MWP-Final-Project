<html>

<head>
    <title>MBOS - Order List</title>
    <link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
    <link rel="stylesheet" href="./font-awesome-4.7.0/css/font-awesome.min.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.6.9/angular.min.js"></script>

</head>

<body ng-app="custOdr" ng-controller="custOdrCtrl" ng-init="initModel()">
    <i class="fa fa-circle-o-notch fa-spin fa-4x fa-fw "
        style="color: lightsteelblue; position: absolute;top: 50%; left: 50%;"></i>

    <div class="w3-bar w3-sand">
        <a class="w3-bar-item w3-button" href="assg3.html">New Order</a>
        <a class="w3-bar-item w3-button w3-black" href="order-list.html">Order List</a>
        <a class="w3-bar-item w3-button" href="menus.html">Menus</a>
        <a class="w3-bar-item w3-button" href="customers.html">Customers</a>
    </div>

    <!-- only show this table when mode_list == true -->
    <table class="w3-table w3-striped w3-border" ng-show="mode_list">
        <tr class="w3-blue">
            <th>ID</th>
            <th>Time</th>
            <th>Name</th>
            <th>Total</th>
            <!-- <th>
                Order by:
                <select class="w3-select" style="display: inline-block; width:100px;" ng-model="odrby_opt"
                    ng-change="changeOrder(odrby_opt)">
                    <option ng-repeat="item in orderby_opts" value="{{item.val}}">
                        {{item.caption}}
                    </option>
                </select>
            </th> -->
        </tr>
        <tr ng-repeat="item in customers">
            <td>{{item.id}}</td>
            <td>{{item.date_time}}</td>
            <td>{{item.id_customer}}</td>
            <td>{{item.id}}</td>
            <!-- <td>
                <button class="w3-btn w3-green w3-small" ng-click="updateCustForm(item)">Update</button>
                <button class="w3-btn w3-red w3-small" ng-click="deleteCust(item)">Delete</button>
            </td> -->
        </tr>
        <!-- <tr>
            <td><input type="text" ng-model="new_cust.name"></td>
            <td><input type="text" ng-model="new_cust.address"></td>
            <td><input type="text" ng-model="new_cust.area"></td>
            <td>
                <button class="w3-btn w3-blue" ng-click="addCustomer()">Add</button>
            </td>
        </tr> -->
    </table>

    <!-- only show this table when mode_update == true -->
    <!-- <table class="w3-table w3-striped w3-border" ng-show="mode_update">
        <tr class="w3-blue">
            <th colspan="2">Update Customer</th>
        </tr>
        <tr>
            <th>ID</th>
            <td>{{update_cust.id}}</td>
        </tr>
        <tr>
            <th>Name</th>
            <td><input type="text" ng-model="update_cust.name"></td>
        </tr>
        <tr>
            <th>Address</th>
            <td><input type="text" ng-model="update_cust.address"></td>
        </tr>
        <tr>
            <th>Area</th>
            <td><input type="text" ng-model="update_cust.area"></td>
        </tr>
        <tr>
            <td colspan="2">
                <button class="w3-btn w3-light-gray" ng-click="updateCustSubmit()">Submit</button>
                <button class="w3-btn w3-light-gray" ng-click="updateMCustCancel()">Cancel</button>
            </td>
        </tr>
    </table> -->

</body>

</html>

<script>
    $('.fa').hide();
    var app = angular.module('custOdr', []);

    app.controller('custOdrCtrl', function ($scope, $http) {
        $scope.ajax_req = false;
        $scope.mode_list = true;
        $scope.mode_update = false;

        $scope.initModel = function () {
            $http.get('http://localhost:8080/mbos/custorders').then(function (res) {
                console.log(res.data);
                $scope.customers = res.data;
            }).then(function () {
                $('.fa').hide(); // hide spin icon
            });
        };

        $scope.getCustName = function (id) {
            $http.get('http://localhost:8080/mbos/custorders%s', id).then(function (res) {
                $scope.details = res.data;
            })
        }

    });</script>